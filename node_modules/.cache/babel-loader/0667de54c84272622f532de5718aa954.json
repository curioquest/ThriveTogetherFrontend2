{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nvar _regeneratorRuntime = require(\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAuthContext = exports.AuthProvider = exports.AuthContext = exports.getToken = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n/**\n * Gets token from API using cookie as credential\n * @internal\n */\n\n\nvar getToken = function getToken(baseUrl) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", fetch(\"\".concat(baseUrl, \"/token\"), {\n              credentials: \"include\"\n            }).then(function (response) {\n              return response.json();\n            }).then(function (data) {\n              var _a;\n\n              return (_a = data === null || data === void 0 ? void 0 : data.access_token) !== null && _a !== void 0 ? _a : null;\n            }).catch(console.error));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n};\n\nexports.getToken = getToken;\n/**\n * Context Hook for authentication. Store token and other\n * data.\n * @public\n */\n\nexports.AuthContext = (0, react_1.createContext)({\n  token: null,\n  setToken: function setToken() {\n    return null;\n  },\n  baseUrl: \"\"\n});\n/**\n * React context provider that provides AuthContext to\n * application, which should be a child node of this component.\n * @param props - Children and optionally URL to retrieve API\n * token.\n * @public\n */\n\nvar AuthProvider = function AuthProvider(props) {\n  var _ref = (0, react_1.useState)(null),\n      _ref2 = _slicedToArray(_ref, 2),\n      token = _ref2[0],\n      setToken = _ref2[1];\n\n  var children = props.children,\n      baseUrl = props.baseUrl;\n  return react_1.default.createElement(exports.AuthContext.Provider, {\n    value: {\n      token: token,\n      setToken: setToken,\n      baseUrl: baseUrl\n    }\n  }, react_1.default.createElement(TokenNode, null), children);\n};\n\nexports.AuthProvider = AuthProvider;\n/**\n * Context Hook.\n * @public\n */\n\nvar useAuthContext = function useAuthContext() {\n  return (0, react_1.useContext)(exports.AuthContext);\n};\n\nexports.useAuthContext = useAuthContext;\n/**\n * Hook that provides token, register, login, logout,\n * fetchWithCookie, and fetchWithToken\n * @public\n */\n\nvar useToken = function useToken() {\n  var _ref3 = (0, exports.useAuthContext)(),\n      token = _ref3.token,\n      setToken = _ref3.setToken,\n      baseUrl = _ref3.baseUrl;\n\n  (0, react_1.useEffect)(function () {\n    var fetchToken = function fetchToken() {\n      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var token;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return (0, exports.getToken)(baseUrl);\n\n              case 2:\n                token = _context2.sent;\n                setToken(token);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    };\n\n    if (!token) {\n      fetchToken();\n    }\n  }, [setToken]);\n  /**\n   * Logs out and deletes token state, then deletes token and\n   * navigates to '/'.\n   */\n\n  var logout = function logout() {\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var url;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (token) {\n                url = \"\".concat(baseUrl, \"/token\");\n                fetch(url, {\n                  method: \"delete\",\n                  credentials: \"include\"\n                }).then(function () {\n                  setToken(null); // Delete old token\n\n                  document.cookie = \"fastapi_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n                }).catch(console.error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n  };\n  /**\n   * Login to set API token.\n   * @param username - Username of existing account\n   * @param password - Password of existing account\n   */\n\n\n  var login = function login(username, password) {\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var url, form;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              url = \"\".concat(baseUrl, \"/token\");\n              form = new FormData();\n              form.append(\"username\", username);\n              form.append(\"password\", password);\n              fetch(url, {\n                method: \"post\",\n                credentials: \"include\",\n                body: form\n              }).then(function () {\n                return (0, exports.getToken)(baseUrl);\n              }).then(function (token) {\n                if (token) {\n                  setToken(token);\n                } else {\n                  throw new Error(\"Failed to get token after login. Got \".concat(token));\n                }\n              }).catch(console.error);\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  };\n  /**\n   * Register user account with API service. Logs in after\n   * registration.\n   * @param userData - Account data to be created or updated.\n   * @param url - API endpoint to update or create account.\n   * @param method - Method to use in request.\n   */\n\n\n  var register = function register(userData, url) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"POST\";\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              fetch(url, {\n                method: method,\n                body: JSON.stringify(userData),\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              }).then(function () {\n                return login(userData.username, userData.password);\n              }).catch(console.error);\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n  };\n  /**\n   * Get data from service that provided login token. Use\n   * this with your account service.\n   * @param url - API endpoint to request\n   * @param method - Method to use in request.\n   * @param options - Additional options to use in fetch\n   * request. For more information, see\n   * https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n   */\n\n\n  var fetchWithCookie = function fetchWithCookie(url) {\n    var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              return _context6.abrupt(\"return\", fetch(url, Object.assign({\n                method: method,\n                credentials: \"include\"\n              }, options)).then(function (resp) {\n                return resp.json();\n              }).catch(console.error));\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n  };\n  /**\n   * Get data from service that provided login token. Use\n   * this with APIs other than the account service.\n   * @param url - API endpoint to request\n   * @param method - Method to use in request.\n   * @param options - Additional options to use in fetch\n   * request. For more information, see\n   * https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n   */\n\n\n  var fetchWithToken = function fetchWithToken(url) {\n    var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n    var otherHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              return _context7.abrupt(\"return\", fetch(url, Object.assign({\n                method: method,\n                headers: Object.assign({\n                  Authorization: \"Bearer \".concat(token)\n                }, otherHeaders)\n              }, options)).then(function (resp) {\n                return resp.json();\n              }).catch(console.error));\n\n            case 1:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n  };\n\n  return {\n    token: token,\n    register: register,\n    login: login,\n    logout: logout,\n    fetchWithCookie: fetchWithCookie,\n    fetchWithToken: fetchWithToken\n  };\n};\n\nexports.default = useToken;\n\nvar TokenNode = function TokenNode() {\n  useToken();\n  return null;\n};","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","apply","exports","useAuthContext","AuthProvider","AuthContext","getToken","react_1","require","baseUrl","fetch","credentials","response","json","data","_a","access_token","catch","console","error","createContext","token","setToken","props","useState","children","default","createElement","Provider","TokenNode","useContext","useToken","useEffect","fetchToken","logout","url","method","document","cookie","login","username","password","form","FormData","append","body","Error","register","userData","JSON","stringify","headers","fetchWithCookie","options","assign","resp","fetchWithToken","otherHeaders","Authorization"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/node_modules/@galvanize-inc/jwtdown-for-react/dist/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useAuthContext = exports.AuthProvider = exports.AuthContext = exports.getToken = void 0;\nconst react_1 = __importStar(require(\"react\"));\n/**\n * Gets token from API using cookie as credential\n * @internal\n */\nconst getToken = (baseUrl) => __awaiter(void 0, void 0, void 0, function* () {\n    return fetch(`${baseUrl}/token`, {\n        credentials: \"include\",\n    })\n        .then((response) => response.json())\n        .then((data) => { var _a; return (_a = data === null || data === void 0 ? void 0 : data.access_token) !== null && _a !== void 0 ? _a : null; })\n        .catch(console.error);\n});\nexports.getToken = getToken;\n/**\n * Context Hook for authentication. Store token and other\n * data.\n * @public\n */\nexports.AuthContext = (0, react_1.createContext)({\n    token: null,\n    setToken: () => null,\n    baseUrl: \"\",\n});\n/**\n * React context provider that provides AuthContext to\n * application, which should be a child node of this component.\n * @param props - Children and optionally URL to retrieve API\n * token.\n * @public\n */\nconst AuthProvider = (props) => {\n    const [token, setToken] = (0, react_1.useState)(null);\n    const { children, baseUrl } = props;\n    return (react_1.default.createElement(exports.AuthContext.Provider, { value: { token, setToken, baseUrl } },\n        react_1.default.createElement(TokenNode, null),\n        children));\n};\nexports.AuthProvider = AuthProvider;\n/**\n * Context Hook.\n * @public\n */\nconst useAuthContext = () => (0, react_1.useContext)(exports.AuthContext);\nexports.useAuthContext = useAuthContext;\n/**\n * Hook that provides token, register, login, logout,\n * fetchWithCookie, and fetchWithToken\n * @public\n */\nconst useToken = () => {\n    const { token, setToken, baseUrl } = (0, exports.useAuthContext)();\n    (0, react_1.useEffect)(() => {\n        const fetchToken = () => __awaiter(void 0, void 0, void 0, function* () {\n            const token = yield (0, exports.getToken)(baseUrl);\n            setToken(token);\n        });\n        if (!token) {\n            fetchToken();\n        }\n    }, [setToken]);\n    /**\n     * Logs out and deletes token state, then deletes token and\n     * navigates to '/'.\n     */\n    const logout = () => __awaiter(void 0, void 0, void 0, function* () {\n        if (token) {\n            const url = `${baseUrl}/token`;\n            fetch(url, { method: \"delete\", credentials: \"include\" })\n                .then(() => {\n                setToken(null);\n                // Delete old token\n                document.cookie =\n                    \"fastapi_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n            })\n                .catch(console.error);\n        }\n    });\n    /**\n     * Login to set API token.\n     * @param username - Username of existing account\n     * @param password - Password of existing account\n     */\n    const login = (username, password) => __awaiter(void 0, void 0, void 0, function* () {\n        const url = `${baseUrl}/token`;\n        const form = new FormData();\n        form.append(\"username\", username);\n        form.append(\"password\", password);\n        fetch(url, {\n            method: \"post\",\n            credentials: \"include\",\n            body: form,\n        })\n            .then(() => (0, exports.getToken)(baseUrl))\n            .then((token) => {\n            if (token) {\n                setToken(token);\n            }\n            else {\n                throw new Error(`Failed to get token after login. Got ${token}`);\n            }\n        })\n            .catch(console.error);\n    });\n    /**\n     * Register user account with API service. Logs in after\n     * registration.\n     * @param userData - Account data to be created or updated.\n     * @param url - API endpoint to update or create account.\n     * @param method - Method to use in request.\n     */\n    const register = (userData, url, method = \"POST\") => __awaiter(void 0, void 0, void 0, function* () {\n        fetch(url, {\n            method: method,\n            body: JSON.stringify(userData),\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        })\n            .then(() => login(userData.username, userData.password))\n            .catch(console.error);\n    });\n    /**\n     * Get data from service that provided login token. Use\n     * this with your account service.\n     * @param url - API endpoint to request\n     * @param method - Method to use in request.\n     * @param options - Additional options to use in fetch\n     * request. For more information, see\n     * https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n     */\n    const fetchWithCookie = (url, method = \"GET\", options = {}) => __awaiter(void 0, void 0, void 0, function* () {\n        return fetch(url, Object.assign({ method: method, credentials: \"include\" }, options))\n            .then((resp) => resp.json())\n            .catch(console.error);\n    });\n    /**\n     * Get data from service that provided login token. Use\n     * this with APIs other than the account service.\n     * @param url - API endpoint to request\n     * @param method - Method to use in request.\n     * @param options - Additional options to use in fetch\n     * request. For more information, see\n     * https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n     */\n    const fetchWithToken = (url, method = \"GET\", otherHeaders = {}, options = {}) => __awaiter(void 0, void 0, void 0, function* () {\n        return fetch(url, Object.assign({ method: method, headers: Object.assign({ Authorization: `Bearer ${token}` }, otherHeaders) }, options))\n            .then((resp) => resp.json())\n            .catch(console.error);\n    });\n    return { token, register, login, logout, fetchWithCookie, fetchWithToken };\n};\nexports.default = useToken;\nconst TokenNode = () => {\n    useToken();\n    return null;\n};\n"],"mappings":"AAAA;;;;;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,KAAmCC,MAAM,CAACC,MAAP,GAAiB,UAASC,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkBC,EAAlB,EAAsB;EAC5F,IAAIA,EAAE,KAAKC,SAAX,EAAsBD,EAAE,GAAGD,CAAL;EACtB,IAAIG,IAAI,GAAGP,MAAM,CAACQ,wBAAP,CAAgCL,CAAhC,EAAmCC,CAAnC,CAAX;;EACA,IAAI,CAACG,IAAD,KAAU,SAASA,IAAT,GAAgB,CAACJ,CAAC,CAACM,UAAnB,GAAgCF,IAAI,CAACG,QAAL,IAAiBH,IAAI,CAACI,YAAhE,CAAJ,EAAmF;IACjFJ,IAAI,GAAG;MAAEK,UAAU,EAAE,IAAd;MAAoBC,GAAG,EAAE,eAAW;QAAE,OAAOV,CAAC,CAACC,CAAD,CAAR;MAAc;IAApD,CAAP;EACD;;EACDJ,MAAM,CAACc,cAAP,CAAsBZ,CAAtB,EAAyBG,EAAzB,EAA6BE,IAA7B;AACH,CAPwD,GAOnD,UAASL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkBC,EAAlB,EAAsB;EACxB,IAAIA,EAAE,KAAKC,SAAX,EAAsBD,EAAE,GAAGD,CAAL;EACtBF,CAAC,CAACG,EAAD,CAAD,GAAQF,CAAC,CAACC,CAAD,CAAT;AACH,CAVqB,CAAtB;;AAWA,IAAIW,kBAAkB,GAAI,QAAQ,KAAKA,kBAAd,KAAsCf,MAAM,CAACC,MAAP,GAAiB,UAASC,CAAT,EAAYc,CAAZ,EAAe;EAC3FhB,MAAM,CAACc,cAAP,CAAsBZ,CAAtB,EAAyB,SAAzB,EAAoC;IAAEU,UAAU,EAAE,IAAd;IAAoBK,KAAK,EAAED;EAA3B,CAApC;AACH,CAF8D,GAE1D,UAASd,CAAT,EAAYc,CAAZ,EAAe;EAChBd,CAAC,CAAC,SAAD,CAAD,GAAec,CAAf;AACH,CAJwB,CAAzB;;AAKA,IAAIE,YAAY,GAAI,QAAQ,KAAKA,YAAd,IAA+B,UAAUC,GAAV,EAAe;EAC7D,IAAIA,GAAG,IAAIA,GAAG,CAACV,UAAf,EAA2B,OAAOU,GAAP;EAC3B,IAAIC,MAAM,GAAG,EAAb;EACA,IAAID,GAAG,IAAI,IAAX,EAAiB,KAAK,IAAIf,CAAT,IAAce,GAAd;IAAmB,IAAIf,CAAC,KAAK,SAAN,IAAmBJ,MAAM,CAACqB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,GAArC,EAA0Cf,CAA1C,CAAvB,EAAqEL,eAAe,CAACqB,MAAD,EAASD,GAAT,EAAcf,CAAd,CAAf;EAAxF;;EACjBW,kBAAkB,CAACK,MAAD,EAASD,GAAT,CAAlB;;EACA,OAAOC,MAAP;AACH,CAND;;AAOA,IAAII,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;EACrF,SAASC,KAAT,CAAeZ,KAAf,EAAsB;IAAE,OAAOA,KAAK,YAAYU,CAAjB,GAAqBV,KAArB,GAA6B,IAAIU,CAAJ,CAAM,UAAUG,OAAV,EAAmB;MAAEA,OAAO,CAACb,KAAD,CAAP;IAAiB,CAA5C,CAApC;EAAoF;;EAC5G,OAAO,KAAKU,CAAC,KAAKA,CAAC,GAAGI,OAAT,CAAN,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;IACvD,SAASC,SAAT,CAAmBhB,KAAnB,EAA0B;MAAE,IAAI;QAAEiB,IAAI,CAACN,SAAS,CAACO,IAAV,CAAelB,KAAf,CAAD,CAAJ;MAA8B,CAApC,CAAqC,OAAOmB,CAAP,EAAU;QAAEJ,MAAM,CAACI,CAAD,CAAN;MAAY;IAAE;;IAC3F,SAASC,QAAT,CAAkBpB,KAAlB,EAAyB;MAAE,IAAI;QAAEiB,IAAI,CAACN,SAAS,CAAC,OAAD,CAAT,CAAmBX,KAAnB,CAAD,CAAJ;MAAkC,CAAxC,CAAyC,OAAOmB,CAAP,EAAU;QAAEJ,MAAM,CAACI,CAAD,CAAN;MAAY;IAAE;;IAC9F,SAASF,IAAT,CAAcd,MAAd,EAAsB;MAAEA,MAAM,CAACkB,IAAP,GAAcR,OAAO,CAACV,MAAM,CAACH,KAAR,CAArB,GAAsCY,KAAK,CAACT,MAAM,CAACH,KAAR,CAAL,CAAoBsB,IAApB,CAAyBN,SAAzB,EAAoCI,QAApC,CAAtC;IAAsF;;IAC9GH,IAAI,CAAC,CAACN,SAAS,GAAGA,SAAS,CAACY,KAAV,CAAgBf,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDS,IAAzD,EAAD,CAAJ;EACH,CALM,CAAP;AAMH,CARD;;AASAnC,MAAM,CAACc,cAAP,CAAsB2B,OAAtB,EAA+B,YAA/B,EAA6C;EAAExB,KAAK,EAAE;AAAT,CAA7C;AACAwB,OAAO,CAACC,cAAR,GAAyBD,OAAO,CAACE,YAAR,GAAuBF,OAAO,CAACG,WAAR,GAAsBH,OAAO,CAACI,QAAR,GAAmB,KAAK,CAA9F;;AACA,IAAMC,OAAO,GAAG5B,YAAY,CAAC6B,OAAO,CAAC,OAAD,CAAR,CAA5B;AACA;AACA;AACA;AACA;;;AACA,IAAMF,QAAQ,GAAG,SAAXA,QAAW,CAACG,OAAD;EAAA,OAAaxB,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;IAAA;MAAA;QAAA;UAAA;YAAA,iCACrDyB,KAAK,WAAID,OAAJ,aAAqB;cAC7BE,WAAW,EAAE;YADgB,CAArB,CAAL,CAGFX,IAHE,CAGG,UAACY,QAAD;cAAA,OAAcA,QAAQ,CAACC,IAAT,EAAd;YAAA,CAHH,EAIFb,IAJE,CAIG,UAACc,IAAD,EAAU;cAAE,IAAIC,EAAJ;;cAAQ,OAAO,CAACA,EAAE,GAAGD,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACE,YAAvD,MAAyE,IAAzE,IAAiFD,EAAE,KAAK,KAAK,CAA7F,GAAiGA,EAAjG,GAAsG,IAA7G;YAAoH,CAJ3I,EAKFE,KALE,CAKIC,OAAO,CAACC,KALZ,CADqD;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAzB,EAAtB;AAAA,CAAjB;;AAQAjB,OAAO,CAACI,QAAR,GAAmBA,QAAnB;AACA;AACA;AACA;AACA;AACA;;AACAJ,OAAO,CAACG,WAAR,GAAsB,CAAC,GAAGE,OAAO,CAACa,aAAZ,EAA2B;EAC7CC,KAAK,EAAE,IADsC;EAE7CC,QAAQ,EAAE;IAAA,OAAM,IAAN;EAAA,CAFmC;EAG7Cb,OAAO,EAAE;AAHoC,CAA3B,CAAtB;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAML,YAAY,GAAG,SAAfA,YAAe,CAACmB,KAAD,EAAW;EAC5B,WAA0B,CAAC,GAAGhB,OAAO,CAACiB,QAAZ,EAAsB,IAAtB,CAA1B;EAAA;EAAA,IAAOH,KAAP;EAAA,IAAcC,QAAd;;EACA,IAAQG,QAAR,GAA8BF,KAA9B,CAAQE,QAAR;EAAA,IAAkBhB,OAAlB,GAA8Bc,KAA9B,CAAkBd,OAAlB;EACA,OAAQF,OAAO,CAACmB,OAAR,CAAgBC,aAAhB,CAA8BzB,OAAO,CAACG,WAAR,CAAoBuB,QAAlD,EAA4D;IAAElD,KAAK,EAAE;MAAE2C,KAAK,EAALA,KAAF;MAASC,QAAQ,EAARA,QAAT;MAAmBb,OAAO,EAAPA;IAAnB;EAAT,CAA5D,EACJF,OAAO,CAACmB,OAAR,CAAgBC,aAAhB,CAA8BE,SAA9B,EAAyC,IAAzC,CADI,EAEJJ,QAFI,CAAR;AAGH,CAND;;AAOAvB,OAAO,CAACE,YAAR,GAAuBA,YAAvB;AACA;AACA;AACA;AACA;;AACA,IAAMD,cAAc,GAAG,SAAjBA,cAAiB;EAAA,OAAM,CAAC,GAAGI,OAAO,CAACuB,UAAZ,EAAwB5B,OAAO,CAACG,WAAhC,CAAN;AAAA,CAAvB;;AACAH,OAAO,CAACC,cAAR,GAAyBA,cAAzB;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM4B,QAAQ,GAAG,SAAXA,QAAW,GAAM;EACnB,YAAqC,CAAC,GAAG7B,OAAO,CAACC,cAAZ,GAArC;EAAA,IAAQkB,KAAR,SAAQA,KAAR;EAAA,IAAeC,QAAf,SAAeA,QAAf;EAAA,IAAyBb,OAAzB,SAAyBA,OAAzB;;EACA,CAAC,GAAGF,OAAO,CAACyB,SAAZ,EAAuB,YAAM;IACzB,IAAMC,UAAU,GAAG,SAAbA,UAAa;MAAA,OAAMhD,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBACzC,OAAM,CAAC,GAAGiB,OAAO,CAACI,QAAZ,EAAsBG,OAAtB,CAAN;;cADyC;gBACjDY,KADiD;gBAEvDC,QAAQ,CAACD,KAAD,CAAR;;cAFuD;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAzB,EAAf;IAAA,CAAnB;;IAIA,IAAI,CAACA,KAAL,EAAY;MACRY,UAAU;IACb;EACJ,CARD,EAQG,CAACX,QAAD,CARH;EASA;AACJ;AACA;AACA;;EACI,IAAMY,MAAM,GAAG,SAATA,MAAS;IAAA,OAAMjD,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;MAAA;MAAA;QAAA;UAAA;YAAA;cACnD,IAAIoC,KAAJ,EAAW;gBACDc,GADC,aACQ1B,OADR;gBAEPC,KAAK,CAACyB,GAAD,EAAM;kBAAEC,MAAM,EAAE,QAAV;kBAAoBzB,WAAW,EAAE;gBAAjC,CAAN,CAAL,CACKX,IADL,CACU,YAAM;kBACZsB,QAAQ,CAAC,IAAD,CAAR,CADY,CAEZ;;kBACAe,QAAQ,CAACC,MAAT,GACI,gEADJ;gBAEH,CAND,EAOKrB,KAPL,CAOWC,OAAO,CAACC,KAPnB;cAQH;;YAXkD;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAzB,EAAf;EAAA,CAAf;EAaA;AACJ;AACA;AACA;AACA;;;EACI,IAAMoB,KAAK,GAAG,SAARA,KAAQ,CAACC,QAAD,EAAWC,QAAX;IAAA,OAAwBxD,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;MAAA;MAAA;QAAA;UAAA;YAAA;cAC9DkD,GAD8D,aACrD1B,OADqD;cAE9DiC,IAF8D,GAEvD,IAAIC,QAAJ,EAFuD;cAGpED,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBJ,QAAxB;cACAE,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBH,QAAxB;cACA/B,KAAK,CAACyB,GAAD,EAAM;gBACPC,MAAM,EAAE,MADD;gBAEPzB,WAAW,EAAE,SAFN;gBAGPkC,IAAI,EAAEH;cAHC,CAAN,CAAL,CAKK1C,IALL,CAKU;gBAAA,OAAM,CAAC,GAAGE,OAAO,CAACI,QAAZ,EAAsBG,OAAtB,CAAN;cAAA,CALV,EAMKT,IANL,CAMU,UAACqB,KAAD,EAAW;gBACjB,IAAIA,KAAJ,EAAW;kBACPC,QAAQ,CAACD,KAAD,CAAR;gBACH,CAFD,MAGK;kBACD,MAAM,IAAIyB,KAAJ,gDAAkDzB,KAAlD,EAAN;gBACH;cACJ,CAbD,EAcKJ,KAdL,CAcWC,OAAO,CAACC,KAdnB;;YALoE;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAzB,EAAjC;EAAA,CAAd;EAqBA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACI,IAAM4B,QAAQ,GAAG,SAAXA,QAAW,CAACC,QAAD,EAAWb,GAAX;IAAA,IAAgBC,MAAhB,uEAAyB,MAAzB;IAAA,OAAoCnD,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;MAAA;QAAA;UAAA;YAAA;cACnFyB,KAAK,CAACyB,GAAD,EAAM;gBACPC,MAAM,EAAEA,MADD;gBAEPS,IAAI,EAAEI,IAAI,CAACC,SAAL,CAAeF,QAAf,CAFC;gBAGPG,OAAO,EAAE;kBACL,gBAAgB;gBADX;cAHF,CAAN,CAAL,CAOKnD,IAPL,CAOU;gBAAA,OAAMuC,KAAK,CAACS,QAAQ,CAACR,QAAV,EAAoBQ,QAAQ,CAACP,QAA7B,CAAX;cAAA,CAPV,EAQKxB,KARL,CAQWC,OAAO,CAACC,KARnB;;YADmF;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAzB,EAA7C;EAAA,CAAjB;EAWA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACI,IAAMiC,eAAe,GAAG,SAAlBA,eAAkB,CAACjB,GAAD;IAAA,IAAMC,MAAN,uEAAe,KAAf;IAAA,IAAsBiB,OAAtB,uEAAgC,EAAhC;IAAA,OAAuCpE,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;MAAA;QAAA;UAAA;YAAA;cAAA,kCACtFyB,KAAK,CAACyB,GAAD,EAAM1E,MAAM,CAAC6F,MAAP,CAAc;gBAAElB,MAAM,EAAEA,MAAV;gBAAkBzB,WAAW,EAAE;cAA/B,CAAd,EAA0D0C,OAA1D,CAAN,CAAL,CACFrD,IADE,CACG,UAACuD,IAAD;gBAAA,OAAUA,IAAI,CAAC1C,IAAL,EAAV;cAAA,CADH,EAEFI,KAFE,CAEIC,OAAO,CAACC,KAFZ,CADsF;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAzB,EAAhD;EAAA,CAAxB;EAKA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACI,IAAMqC,cAAc,GAAG,SAAjBA,cAAiB,CAACrB,GAAD;IAAA,IAAMC,MAAN,uEAAe,KAAf;IAAA,IAAsBqB,YAAtB,uEAAqC,EAArC;IAAA,IAAyCJ,OAAzC,uEAAmD,EAAnD;IAAA,OAA0DpE,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,0CAAyB;MAAA;QAAA;UAAA;YAAA;cAAA,kCACxGyB,KAAK,CAACyB,GAAD,EAAM1E,MAAM,CAAC6F,MAAP,CAAc;gBAAElB,MAAM,EAAEA,MAAV;gBAAkBe,OAAO,EAAE1F,MAAM,CAAC6F,MAAP,CAAc;kBAAEI,aAAa,mBAAYrC,KAAZ;gBAAf,CAAd,EAAoDoC,YAApD;cAA3B,CAAd,EAA8GJ,OAA9G,CAAN,CAAL,CACFrD,IADE,CACG,UAACuD,IAAD;gBAAA,OAAUA,IAAI,CAAC1C,IAAL,EAAV;cAAA,CADH,EAEFI,KAFE,CAEIC,OAAO,CAACC,KAFZ,CADwG;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAzB,EAAnE;EAAA,CAAvB;;EAKA,OAAO;IAAEE,KAAK,EAALA,KAAF;IAAS0B,QAAQ,EAARA,QAAT;IAAmBR,KAAK,EAALA,KAAnB;IAA0BL,MAAM,EAANA,MAA1B;IAAkCkB,eAAe,EAAfA,eAAlC;IAAmDI,cAAc,EAAdA;EAAnD,CAAP;AACH,CArGD;;AAsGAtD,OAAO,CAACwB,OAAR,GAAkBK,QAAlB;;AACA,IAAMF,SAAS,GAAG,SAAZA,SAAY,GAAM;EACpBE,QAAQ;EACR,OAAO,IAAP;AACH,CAHD"},"metadata":{},"sourceType":"script"}