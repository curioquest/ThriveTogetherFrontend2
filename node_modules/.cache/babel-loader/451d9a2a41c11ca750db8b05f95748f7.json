{"ast":null,"code":"var _jsxFileName = \"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/PeerConnectionList.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PeerConnectionList = () => {\n  _s();\n\n  const [peerRequest, setpeerRequest] = useState(\"\");\n  const [loginAccount, setLoginAccount] = useState(\"\");\n  useEffect(() => {\n    async function getPeerData() {\n      const url = `${process.env.REACT_APP_API_HOST}/token`;\n      const response = await fetch(url, {\n        credentials: \"include\"\n      });\n      const data = await response.json();\n\n      if (response.ok) {\n        setLoginAccount(data.account);\n      }\n    }\n\n    getPeerData();\n  }, []);\n  useEffect(() => {\n    async function showPeerRequest() {\n      if (!loginAccount) {\n        return;\n      }\n\n      let listUrl = `${process.env.REACT_APP_API_HOST}/api/peer_connections/${loginAccount.id}`;\n      const response = await fetch(listUrl, {\n        credentials: \"include\"\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setpeerRequest(data.peerConnections);\n      }\n    }\n\n    showPeerRequest();\n  }, [loginAccount]);\n\n  const handleSubmit = async event => {\n    let approve_data = {};\n    let approve_data2 = {};\n    let locationUrl = `${process.env.REACT_APP_API_HOST}/api/peerRequest/operate/${event.peerConnections.recipient}/${event.peerConnections.sender}/${event.operate}`;\n    const fetchConfig = {\n      method: \"post\",\n      body: JSON.stringify(),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: \"include\"\n    };\n    const response = await fetch(locationUrl, fetchConfig);\n\n    if (response.ok) {\n      if (event.operate === \"Reject\") {\n        refreshPage();\n      }\n\n      if (event.operate === \"Approve\") {\n        let approveUrl = `${process.env.REACT_APP_API_HOST}/api/peerAdd`;\n        approve_data = {\n          user_id: event.peerConnections.recipient,\n          peer_id: event.peerConnections.sender,\n          peer_name: event.peerConnections.sender_name,\n          profile_link: \"\",\n          tags_id: 1,\n          profile_image: \"\",\n          status: 0\n        };\n        const approveConfig = {\n          method: \"post\",\n          body: JSON.stringify(approve_data),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: \"include\"\n        };\n        const response = await fetch(approveUrl, approveConfig);\n\n        if (response.ok) {\n          let approveUrl = `${process.env.REACT_APP_API_HOST}/api/peerAdd`;\n          approve_data2 = {\n            user_id: event.peerConnections.sender,\n            peer_id: event.peerConnections.recipient,\n            peer_name: event.loginAccount.name,\n            profile_link: \"\",\n            tags_id: 1,\n            profile_image: \"\",\n            status: 0\n          };\n          const approveConfig2 = {\n            method: \"post\",\n            body: JSON.stringify(approve_data2),\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            credentials: \"include\"\n          };\n          const response2 = await fetch(approveUrl, approveConfig2);\n\n          if (response2.ok) {\n            refreshPage();\n          }\n        }\n      }\n    }\n  };\n\n  const refreshPage = () => {\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container content-container rounded-edges\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-striped\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Peer Request Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"message\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Operate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: Array.from(peerRequest).map(peerConnections => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: peerConnections.sender_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: peerConnections.has_messaged\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: peerConnections.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: peerConnections.status === \"pending\" ? \"\" : \"none\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-warning\",\n                  onClick: handleSubmit.bind(this, {\n                    peerConnections,\n                    loginAccount,\n                    operate: \"Approve\"\n                  }),\n                  children: \"Approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-warning\",\n                  onClick: handleSubmit.bind(this, {\n                    peerConnections,\n                    operate: \"Reject\"\n                  }),\n                  children: \"Reject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 17\n            }, this)]\n          }, peerConnections.sender_name + peerConnections.recipient, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PeerConnectionList, \"cPzJYNH/adAtFYxs5J5PfFg/05w=\");\n\n_c = PeerConnectionList;\nexport default PeerConnectionList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PeerConnectionList\");","map":{"version":3,"names":["useEffect","useState","PeerConnectionList","peerRequest","setpeerRequest","loginAccount","setLoginAccount","getPeerData","url","process","env","REACT_APP_API_HOST","response","fetch","credentials","data","json","ok","account","showPeerRequest","listUrl","id","peerConnections","handleSubmit","event","approve_data","approve_data2","locationUrl","recipient","sender","operate","fetchConfig","method","body","JSON","stringify","headers","refreshPage","approveUrl","user_id","peer_id","peer_name","sender_name","profile_link","tags_id","profile_image","status","approveConfig","name","approveConfig2","response2","window","location","reload","Array","from","map","has_messaged","display","bind"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/PeerConnectionList.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst PeerConnectionList = () => {\n  const [peerRequest, setpeerRequest] = useState(\"\");\n  const [loginAccount, setLoginAccount] = useState(\"\");\n\n  useEffect(() => {\n    async function getPeerData() {\n      const url = `${process.env.REACT_APP_API_HOST}/token`;\n      const response = await fetch(url, {\n        credentials: \"include\",\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        setLoginAccount(data.account);\n      }\n    }\n\n    getPeerData();\n  }, []);\n\n  useEffect(() => {\n    async function showPeerRequest() {\n      if (!loginAccount) {\n        return;\n      }\n      let listUrl = `${process.env.REACT_APP_API_HOST}/api/peer_connections/${loginAccount.id}`;\n      const response = await fetch(listUrl, {\n        credentials: \"include\",\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setpeerRequest(data.peerConnections);\n      }\n    }\n\n    showPeerRequest();\n  }, [loginAccount]);\n\n  const handleSubmit = async (event) => {\n    let approve_data = {};\n    let approve_data2 = {};\n    let locationUrl = `${process.env.REACT_APP_API_HOST}/api/peerRequest/operate/${event.peerConnections.recipient}/${event.peerConnections.sender}/${event.operate}`;\n    const fetchConfig = {\n      method: \"post\",\n      body: JSON.stringify(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n    };\n    const response = await fetch(locationUrl, fetchConfig);\n    if (response.ok) {\n      if (event.operate === \"Reject\") {\n        refreshPage();\n      }\n      if (event.operate === \"Approve\") {\n        let approveUrl = `${process.env.REACT_APP_API_HOST}/api/peerAdd`;\n        approve_data = {\n          user_id: event.peerConnections.recipient,\n          peer_id: event.peerConnections.sender,\n          peer_name: event.peerConnections.sender_name,\n          profile_link: \"\",\n          tags_id: 1,\n          profile_image: \"\",\n          status: 0,\n        };\n        const approveConfig = {\n          method: \"post\",\n          body: JSON.stringify(approve_data),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          credentials: \"include\",\n        };\n        const response = await fetch(approveUrl, approveConfig);\n        if (response.ok) {\n          let approveUrl = `${process.env.REACT_APP_API_HOST}/api/peerAdd`;\n          approve_data2 = {\n            user_id: event.peerConnections.sender,\n            peer_id: event.peerConnections.recipient,\n            peer_name: event.loginAccount.name,\n            profile_link: \"\",\n            tags_id: 1,\n            profile_image: \"\",\n            status: 0,\n          };\n          const approveConfig2 = {\n            method: \"post\",\n            body: JSON.stringify(approve_data2),\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            credentials: \"include\",\n          };\n          const response2 = await fetch(approveUrl, approveConfig2);\n          if (response2.ok) {\n            refreshPage();\n          }\n        }\n      }\n    }\n  };\n\n  const refreshPage = () => {\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"container content-container rounded-edges\">\n      <table className=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>Peer Request Name</th>\n            <th>message</th>\n            <th>status</th>\n            <th>Operate</th>\n          </tr>\n        </thead>\n        <tbody>\n          {Array.from(peerRequest).map((peerConnections) => {\n            return (\n              <tr key={peerConnections.sender_name + peerConnections.recipient}>\n                <td>{peerConnections.sender_name}</td>\n                <td>{peerConnections.has_messaged}</td>\n                <td>{peerConnections.status}</td>\n                <td>\n                  <div\n                    style={{\n                      display:\n                        peerConnections.status === \"pending\" ? \"\" : \"none\",\n                    }}\n                  >\n                    <button\n                      className=\"btn btn-outline-warning\"\n                      onClick={handleSubmit.bind(this, {\n                        peerConnections,\n                        loginAccount,\n                        operate: \"Approve\",\n                      })}\n                    >\n                      Approve\n                    </button>\n                    <button\n                      className=\"btn btn-outline-warning\"\n                      onClick={handleSubmit.bind(this, {\n                        peerConnections,\n                        operate: \"Reject\",\n                      })}\n                    >\n                      Reject\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default PeerConnectionList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}