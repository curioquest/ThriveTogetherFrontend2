{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useCallback}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditTags=function EditTags(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allTags=_useState4[0],setAllTags=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userTags=_useState6[0],setUserTags=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),addableTags=_useState8[0],setAddableTags=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),tagToAdd=_useState10[0],setTagToAdd=_useState10[1];var getAddableTags=useCallback(function(){var difference=allTags;userTags.forEach(function(tag){for(var i=0;i<difference.length;i++){if(Object.keys(tag).toString()===Object.keys(difference[i]).toString()){difference.splice(i,1);}}});setAddableTags(difference);},[userTags,allTags]);var getUserTags=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"\".concat(process.env.REACT_APP_API_HOST,\"/tags/\").concat(userData[\"username\"]);_context.next=3;return fetch(url,{credentials:\"include\"});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(response.ok){setUserTags(data.tags);}else{console.log(\"Error! Tags not found.\");}case 8:case\"end\":return _context.stop();}}},_callee);})),[userData]);useEffect(function(){function getUserData(){return _getUserData.apply(this,arguments);}function _getUserData(){_getUserData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"\".concat(process.env.REACT_APP_API_HOST,\"/token\");_context2.next=3;return fetch(url,{credentials:\"include\"});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;if(response.ok){setUserData(data.account);}else{console.log(\"User data could not be fetched\");}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getUserData.apply(this,arguments);}function getAllTags(){return _getAllTags.apply(this,arguments);}function _getAllTags(){_getAllTags=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var url,response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url=\"\".concat(process.env.REACT_APP_API_HOST,\"/tags\");_context3.next=3;return fetch(url);case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:data=_context3.sent;if(response.ok){setAllTags(data.tags);}else{console.log(\"Tags could not be fetched.\");}case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _getAllTags.apply(this,arguments);}getUserData();getAllTags();},[]);useEffect(function(){getUserTags();},[userData,getUserTags]);useEffect(function(){getAddableTags();},[userTags,getAddableTags]);function deleteTag(_x){return _deleteTag.apply(this,arguments);}function _deleteTag(){_deleteTag=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event){var url,fetchConfig,response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();url=\"\".concat(process.env.REACT_APP_API_HOST,\"/tags/\").concat(event.target.value);fetchConfig={method:\"delete\",credentials:\"include\"};_context4.next=5;return fetch(url,fetchConfig);case 5:response=_context4.sent;if(response.ok){getUserTags();getAddableTags();}case 7:case\"end\":return _context4.stop();}}},_callee4);}));return _deleteTag.apply(this,arguments);}function handleSubmit(_x2){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event){var url,fetchConfig,response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:event.preventDefault();url=\"\".concat(process.env.REACT_APP_API_HOST,\"/tags/\").concat(tagToAdd);fetchConfig={method:\"post\",credentials:\"include\"};_context5.next=5;return fetch(url,fetchConfig);case 5:response=_context5.sent;if(response.ok){getUserTags();getAddableTags();}case 7:case\"end\":return _context5.stop();}}},_callee5);}));return _handleSubmit.apply(this,arguments);}function handleTagChange(event){var value=event.target.value;setTagToAdd(value);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-container rounded-edges bg-text mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current User Tags:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mb-3\",children:userTags.map(function(tag){var currentTag=Object.entries(tag);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"id-tag\",children:[currentTag[0][1],/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:deleteTag,\"aria-label\":\"delete\",value:currentTag[0][0]})]})},currentTag[0]);})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a Tag:\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,id:\"add-tag\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:handleTagChange,value:tagToAdd,required:true,name:\"tag_to_add\",id:\"tag_to_add\",className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a Tag\"}),addableTags.map(function(tag){var currentTag=Object.entries(tag);return/*#__PURE__*/_jsx(\"option\",{value:currentTag[0][0],children:currentTag[0][1]},currentTag[0][0]+currentTag[0][1]);})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Add\"})]})})]})});};export default EditTags;","map":{"version":3,"names":["useEffect","useState","useCallback","EditTags","userData","setUserData","allTags","setAllTags","userTags","setUserTags","addableTags","setAddableTags","tagToAdd","setTagToAdd","getAddableTags","difference","forEach","tag","i","length","Object","keys","toString","splice","getUserTags","url","process","env","REACT_APP_API_HOST","fetch","credentials","response","json","data","ok","tags","console","log","getUserData","account","getAllTags","deleteTag","event","preventDefault","target","value","fetchConfig","method","handleSubmit","handleTagChange","map","currentTag","entries"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/src/EditTags.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\n\nconst EditTags = () => {\n    const [userData, setUserData] = useState(\"\");\n    const [allTags, setAllTags] = useState([]);\n    const [userTags, setUserTags] = useState([]);\n    const [addableTags, setAddableTags] = useState([]);\n    const [tagToAdd, setTagToAdd] = useState(\"\");\n\n    const getAddableTags = useCallback(() => {\n            let difference = allTags;\n            userTags.forEach(tag => {\n                for (let i = 0; i < difference.length; i++){\n                    if (Object.keys(tag).toString() === Object.keys(difference[i]).toString()) {\n                        difference.splice(i, 1);\n                    }\n                }\n            });\n            setAddableTags(difference);\n        }, [userTags, allTags]);\n\n    const getUserTags = useCallback(async () => {\n            let url=`${process.env.REACT_APP_API_HOST}/tags/${userData[\"username\"]}`;\n            let response = await fetch(\n                url,\n                {\n                    credentials: \"include\",\n                }\n            );\n            let data = await response.json();\n\n            if (response.ok) {\n                setUserTags(data.tags)\n            } else {\n                console.log(\"Error! Tags not found.\")\n            }\n        }, [userData]);\n\n\n    useEffect(() => {\n\n        async function getUserData() {\n            let url= `${process.env.REACT_APP_API_HOST}/token`;\n            let response = await fetch(url, {\n                credentials: \"include\",\n            });\n            let data = await response.json();\n\n            if (response.ok) {\n                setUserData(data.account);\n            } else {\n                console.log(\"User data could not be fetched\");\n            }\n        }\n\n        async function getAllTags() {\n            let url=`${process.env.REACT_APP_API_HOST}/tags`\n            let response = await fetch(url)\n            let data = await response.json();\n\n            if (response.ok) {\n                setAllTags(data.tags);\n            } else {\n                console.log(\"Tags could not be fetched.\")\n            }\n        }\n\n        getUserData();\n        getAllTags();\n    }, []);\n\n    useEffect(() => {\n        getUserTags();\n    }, [userData, getUserTags]);\n\n    useEffect(() => {\n        getAddableTags();\n    }, [userTags, getAddableTags]);\n\n    async function deleteTag(event) {\n        event.preventDefault();\n        const url = `${process.env.REACT_APP_API_HOST}/tags/${event.target.value}`;\n        const fetchConfig = {\n            method: \"delete\",\n            credentials: \"include\",\n        }\n\n        const response = await fetch(url, fetchConfig);\n        if (response.ok) {\n            getUserTags();\n            getAddableTags();\n        }\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault();\n        const url = `${process.env.REACT_APP_API_HOST}/tags/${tagToAdd}`;\n        const fetchConfig = {\n            method: \"post\",\n            credentials: \"include\",\n        }\n\n        const response = await fetch(url, fetchConfig);\n        if (response.ok) {\n            getUserTags();\n            getAddableTags();\n        }\n    }\n\n    function handleTagChange(event) {\n        const value = event.target.value;\n        setTagToAdd(value);\n    }\n\n    return (\n        <div>\n            <div className=\"content-container rounded-edges bg-text mb-3\">\n                <h3>Current User Tags:</h3>\n                <div className=\"d-flex mb-3\">\n                    {userTags.map(tag => {\n                        let currentTag = Object.entries(tag);\n                        return (\n                            <div key={currentTag[0]}>\n                                <span className=\"id-tag\">\n                                    {currentTag[0][1]}\n                                    <button type=\"button\" className='btn-close' onClick={deleteTag} aria-label=\"delete\" value={currentTag[0][0]}></button>\n                                </span>\n                            </div>\n                        );\n                    })}\n                </div>\n                <h3>Add a Tag:</h3>\n                <form onSubmit={handleSubmit} id=\"add-tag\">\n                    <div className=\"d-flex mb-3\">\n                        <select onChange={handleTagChange} value={tagToAdd} required name=\"tag_to_add\" id=\"tag_to_add\" className=\"form-select\">\n                            <option value=\"\">Choose a Tag</option>\n                            {addableTags.map(tag => {\n                                let currentTag = Object.entries(tag);\n                                return (\n                                    <option key={currentTag[0][0] + currentTag[0][1]} value={currentTag[0][0]}>\n                                        {currentTag[0][1]}\n                                    </option>\n                                );\n                            })}\n                        </select>\n                        <button className=\"btn btn-primary\">Add</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default EditTags;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}