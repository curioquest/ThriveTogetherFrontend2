{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PeerList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),peer=_useState2[0],setPeer=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),peerData=_useState4[0],setPeerData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),peerDataLoaded=_useState6[0],setPeerDataLoaded=_useState6[1];useEffect(function(){function getPeerData(){return _getPeerData.apply(this,arguments);}function _getPeerData(){_getPeerData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"\".concat(process.env.REACT_APP_API_HOST,\"/token\");_context.next=3;return fetch(url,{credentials:\"include\"});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(response.ok){setPeerData(data.account);setPeerDataLoaded(true);}else{console.log(\"Peer data could not be fetched\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return _getPeerData.apply(this,arguments);}getPeerData();},[peerDataLoaded]);var LoadPeers=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!peerDataLoaded||!peerData)){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:_context2.next=6;return fetch(\"\".concat(process.env.REACT_APP_API_HOST,\"/peers/\").concat(peerData[\"id\"]),{credentials:\"include\"});case 6:response=_context2.sent;if(!response.ok){_context2.next=14;break;}_context2.next=10;return response.json();case 10:data=_context2.sent;setPeer(data);_context2.next=15;break;case 14:console.log(\"Error! Peer not found.\");case 15:case\"end\":return _context2.stop();}}},_callee2);})),[peerData,peerDataLoaded]);useEffect(function(){LoadPeers();},[peerData,LoadPeers]);return/*#__PURE__*/_jsxs(\"div\",{className:\"content-container rounded-edges\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Peers\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Profile Link\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Profile Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:peer.map(function(peerData){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:peerData.peer_name}),/*#__PURE__*/_jsx(\"td\",{children:peerData.profile_link}),/*#__PURE__*/_jsx(\"td\",{children:peerData.profile_image})]},peerData.id+peerData.peer_name);})})]})]});}export default PeerList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","PeerList","peer","setPeer","peerData","setPeerData","peerDataLoaded","setPeerDataLoaded","getPeerData","url","process","env","REACT_APP_API_HOST","fetch","credentials","response","json","data","ok","account","console","log","LoadPeers","map","peer_name","profile_link","profile_image","id"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend/src/PeerList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\n\nfunction PeerList() {\n  const [peer, setPeer] = useState([]);\n  const [peerData, setPeerData] = useState(\"\");\n  const [peerDataLoaded, setPeerDataLoaded] = useState(false);\n\n  useEffect(() => {\n    async function getPeerData() {\n      const url = `${process.env.REACT_APP_API_HOST}/token`;\n      const response = await fetch(url, {\n        credentials: \"include\",\n      });\n      const data = await response.json();\n\n      if (response.ok) {\n        setPeerData(data.account);\n        setPeerDataLoaded(true);\n      } else {\n        console.log(\"Peer data could not be fetched\");\n      }\n    }\n\n    getPeerData();\n  }, [peerDataLoaded]);\n\n  const LoadPeers = useCallback(async () => {\n    if (!peerDataLoaded || !peerData) {\n      return;\n    } else {\n      const response = await fetch(\n        `${process.env.REACT_APP_API_HOST}/peers/${peerData[\"id\"]}`,\n        {\n          credentials: \"include\",\n        }\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        setPeer(data);\n      } else {\n        console.log(\"Error! Peer not found.\");\n      }\n    }\n  }, [peerData, peerDataLoaded]);\n\n  useEffect(() => {\n    LoadPeers();\n  }, [peerData, LoadPeers]);\n\n  return (\n    <div className=\"content-container rounded-edges\">\n      <h1>Peers</h1>\n      <table className=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Profile Link</th>\n            <th>Profile Image</th>\n          </tr>\n        </thead>\n        <tbody>\n          {peer.map((peerData) => {\n            return (\n              <tr key={peerData.id + peerData.peer_name}>\n                <td>{peerData.peer_name}</td>\n                <td>{peerData.profile_link}</td>\n                <td>{peerData.profile_image}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default PeerList;\n"],"mappings":"+cAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,WAArC,KAAwD,OAAxD,C,wFAEA,QAASC,SAAT,EAAoB,CAClB,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,eAAgCL,QAAQ,CAAC,EAAD,CAAxC,yCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAA4CP,QAAQ,CAAC,KAAD,CAApD,yCAAOQ,cAAP,eAAuBC,iBAAvB,eAEAR,SAAS,CAAC,UAAM,SACCS,YADD,6IACd,2JACQC,GADR,WACiBC,OAAO,CAACC,GAAR,CAAYC,kBAD7B,iCAEyBC,MAAK,CAACJ,GAAD,CAAM,CAChCK,WAAW,CAAE,SADmB,CAAN,CAF9B,QAEQC,QAFR,qCAKqBA,SAAQ,CAACC,IAAT,EALrB,QAKQC,IALR,eAOE,GAAIF,QAAQ,CAACG,EAAb,CAAiB,CACfb,WAAW,CAACY,IAAI,CAACE,OAAN,CAAX,CACAZ,iBAAiB,CAAC,IAAD,CAAjB,CACD,CAHD,IAGO,CACLa,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACD,CAZH,sDADc,8CAgBdb,WAAW,GACZ,CAjBQ,CAiBN,CAACF,cAAD,CAjBM,CAAT,CAmBA,GAAMgB,UAAS,CAAGtB,WAAW,wEAAC,iKACxB,CAACM,cAAD,EAAmB,CAACF,QADI,2FAIHS,MAAK,WACvBH,OAAO,CAACC,GAAR,CAAYC,kBADW,mBACiBR,QAAQ,CAAC,IAAD,CADzB,EAE1B,CACEU,WAAW,CAAE,SADf,CAF0B,CAJF,QAIpBC,QAJoB,oBAWtBA,QAAQ,CAACG,EAXa,mDAYLH,SAAQ,CAACC,IAAT,EAZK,SAYlBC,IAZkB,gBAaxBd,OAAO,CAACc,IAAD,CAAP,CAbwB,gCAexBG,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAfwB,yDAAD,GAkB1B,CAACjB,QAAD,CAAWE,cAAX,CAlB0B,CAA7B,CAoBAP,SAAS,CAAC,UAAM,CACduB,SAAS,GACV,CAFQ,CAEN,CAAClB,QAAD,CAAWkB,SAAX,CAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,iCAAf,wBACE,6BADF,cAEE,eAAO,SAAS,CAAC,qBAAjB,wBACE,oCACE,mCACE,gCADF,cAEE,oCAFF,cAGE,qCAHF,GADF,EADF,cAQE,uBACGpB,IAAI,CAACqB,GAAL,CAAS,SAACnB,QAAD,CAAc,CACtB,mBACE,mCACE,oBAAKA,QAAQ,CAACoB,SAAd,EADF,cAEE,oBAAKpB,QAAQ,CAACqB,YAAd,EAFF,cAGE,oBAAKrB,QAAQ,CAACsB,aAAd,EAHF,GAAStB,QAAQ,CAACuB,EAAT,CAAcvB,QAAQ,CAACoB,SAAhC,CADF,CAOD,CARA,CADH,EARF,GAFF,GADF,CAyBD,CAED,cAAevB,SAAf"},"metadata":{},"sourceType":"module"}