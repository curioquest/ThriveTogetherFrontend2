{"ast":null,"code":"var _jsxFileName = \"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/Messages/InboxCards.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { setRecipient } from './recipientActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction InboxCards(props) {\n  _s();\n\n  const [messagesData, setMessagesData] = useState([]);\n  const [userData, setUserData] = useState([]);\n  const [userDataLoaded, setUserDataLoaded] = useState(false);\n  useEffect(() => {\n    async function getUserData() {\n      let url = `${process.env.REACT_APP_API_HOST}/token`;\n      let response = await fetch(url, {\n        credentials: \"include\"\n      });\n      let data = await response.json();\n\n      if (response.ok) {\n        setUserData(data.account);\n        setUserDataLoaded(true);\n      } else {\n        console.log(\"Your data could not be fetched\");\n      }\n    }\n\n    getUserData();\n  }, [userDataLoaded]);\n  useEffect(() => {\n    async function getMessagesData() {\n      if (!userDataLoaded || !userData) {\n        return;\n      } else {\n        let url = `${process.env.REACT_APP_API_HOST}/api/messages/${userData[\"id\"]}`;\n        let response = await fetch(url, {\n          credentials: \"include\"\n        });\n        let data = await response.json();\n\n        if (response.ok) {\n          setMessagesData(data);\n        } else {\n          console.log(\"could not return user messages\");\n        }\n      }\n    }\n\n    getMessagesData();\n  }, [userData, userDataLoaded]);\n\n  const handleSetRecipient = userId => {\n    props.setRecipient({\n      recipient: userId\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-start\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: messagesData.map(conversation => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rounded-circle overflow-hidden me-2\",\n                style: {\n                  width: '40px',\n                  height: '40px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: conversation[0].profile_image,\n                  alt: \"Profile\",\n                  className: \"img-fluid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: conversation[0].username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: conversation[0].content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: new Date(conversation[0].date).toLocaleString('en-US', {\n                dateStyle: 'medium',\n                timeStyle: 'short'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-left mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm btn-primary mb-2\",\n              onClick: () => handleSetRecipient(conversation[0].user_id),\n              children: \"Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, conversation[0].id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(InboxCards, \"xVe8do62uuAjYUODK1lOCWaMB58=\");\n\n_c = InboxCards;\n;\n\nconst mapStateToProps = state => ({\n  recipient: state.recipient\n});\n\nexport default connect(mapStateToProps, {\n  setRecipient\n})(InboxCards);\n\nvar _c;\n\n$RefreshReg$(_c, \"InboxCards\");","map":{"version":3,"names":["React","useEffect","useState","connect","setRecipient","InboxCards","props","messagesData","setMessagesData","userData","setUserData","userDataLoaded","setUserDataLoaded","getUserData","url","process","env","REACT_APP_API_HOST","response","fetch","credentials","data","json","ok","account","console","log","getMessagesData","handleSetRecipient","userId","recipient","map","conversation","width","height","profile_image","username","content","Date","date","toLocaleString","dateStyle","timeStyle","user_id","id","mapStateToProps","state"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/Messages/InboxCards.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { connect } from 'react-redux';\nimport { setRecipient } from './recipientActions';\n\n\n\nfunction InboxCards(props) {\n    const [messagesData, setMessagesData] = useState([]);\n    const [userData, setUserData] = useState([]);\n    const [userDataLoaded, setUserDataLoaded] = useState(false);\n\n\n    useEffect(() => {\n        async function getUserData() {\n            let url = `${process.env.REACT_APP_API_HOST}/token`;\n            let response = await fetch(url, {\n                credentials: \"include\",\n            });\n            let data = await response.json()\n\n            if (response.ok) {\n                setUserData(data.account)\n                setUserDataLoaded(true);\n            } else {\n                console.log(\"Your data could not be fetched\")\n            }\n        }\n\n        getUserData();\n    }, [userDataLoaded]);\n\n    useEffect(() => {\n        async function getMessagesData() {\n            if (!userDataLoaded || !userData) {\n              return;\n            } else {\n                let url = `${process.env.REACT_APP_API_HOST}/api/messages/${userData[\"id\"]}`;\n                let response = await fetch(\n                    url,\n                    {\n                    credentials: \"include\",\n                    }\n                );\n                let data = await response.json()\n                if (response.ok) {\n                  setMessagesData(data)\n                } else {\n                  console.log(\"could not return user messages\")\n            }\n                }\n        }\n\n        getMessagesData();\n    }, [userData, userDataLoaded]);\n\n    const handleSetRecipient = (userId) => {\n      props.setRecipient({recipient: userId});\n    };\n\n   return (\n    <div className=\"container mt-4\">\n      <div className=\"row justify-content-start\">\n        <div className=\"col-lg-6\">\n            {messagesData.map((conversation) => (\n          <div key={conversation[0].id} className=\"card mb-4\">\n            <div className=\"card-body\">\n                <div className=\"d-flex align-items-center mb-2\">\n                  <div className=\"rounded-circle overflow-hidden me-2\" style={{ width: '40px', height: '40px' }}>\n                    <img src={conversation[0].profile_image} alt=\"Profile\" className=\"img-fluid\" />\n                  </div>\n                  <strong>{conversation[0].username}</strong>\n                </div>\n                <div className=\"d-flex justify-content-center mt-2\">\n                <p>{conversation[0].content}</p>\n                </div>\n                <small className=\"text-muted\">{new Date(conversation[0].date).toLocaleString('en-US', { dateStyle: 'medium', timeStyle: 'short' })}</small>\n            </div>\n            <div className=\"d-flex justify-content-left mt-2\">\n              <button className=\"btn btn-sm btn-primary mb-2\" onClick={() => handleSetRecipient(conversation[0].user_id)}>Message</button>\n          </div>\n          </div>\n        ))}\n      </div>\n    </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  recipient: state.recipient,\n});\n\nexport default connect(mapStateToProps, { setRecipient })(InboxCards);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}