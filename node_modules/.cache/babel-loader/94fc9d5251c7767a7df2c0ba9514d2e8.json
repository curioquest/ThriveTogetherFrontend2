{"ast":null,"code":"var _jsxFileName = \"/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/EditTags.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditTags = () => {\n  _s();\n\n  const [userData, setUserData] = useState(\"\");\n  const [allTags, setAllTags] = useState([]);\n  const [userTags, setUserTags] = useState([]);\n  const [addableTags, setAddableTags] = useState([]);\n  const [tagToAdd, setTagToAdd] = useState(\"\");\n  const getAddableTags = useCallback(() => {\n    let difference = allTags;\n    userTags.forEach(tag => {\n      for (let i = 0; i < difference.length; i++) {\n        if (Object.keys(tag).toString() === Object.keys(difference[i]).toString()) {\n          difference.splice(i, 1);\n        }\n      }\n    });\n    setAddableTags(difference);\n  }, [userTags, allTags]);\n  const getUserTags = useCallback(async () => {\n    let url = `${process.env.REACT_APP_API_HOST}/api/tags/${userData[\"username\"]}`;\n    let response = await fetch(url, {\n      credentials: \"include\"\n    });\n    let data = await response.json();\n\n    if (response.ok) {\n      setUserTags(data.tags);\n    } else {\n      console.log(\"Error! Tags not found.\");\n    }\n  }, [userData]);\n  useEffect(() => {\n    async function getUserData() {\n      let url = `${process.env.REACT_APP_API_HOST}/token`;\n      let response = await fetch(url, {\n        credentials: \"include\"\n      });\n      let data = await response.json();\n\n      if (response.ok) {\n        setUserData(data.account);\n      } else {\n        console.log(\"User data could not be fetched\");\n      }\n    }\n\n    async function getAllTags() {\n      let url = `${process.env.REACT_APP_API_HOST}/api/tags`;\n      let response = await fetch(url);\n      let data = await response.json();\n\n      if (response.ok) {\n        setAllTags(data.tags);\n      } else {\n        console.log(\"Tags could not be fetched.\");\n      }\n    }\n\n    getUserData();\n    getAllTags();\n  }, []);\n  useEffect(() => {\n    getUserTags();\n  }, [userData, getUserTags]);\n  useEffect(() => {\n    getAddableTags();\n  }, [userTags, getAddableTags]);\n\n  async function deleteTag(event) {\n    event.preventDefault();\n    const url = `${process.env.REACT_APP_API_HOST}/api/tags/${event.target.value}`;\n    const fetchConfig = {\n      method: \"delete\",\n      credentials: \"include\"\n    };\n    const response = await fetch(url, fetchConfig);\n\n    if (response.ok) {\n      getUserTags();\n      getAddableTags();\n    }\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const url = `${process.env.REACT_APP_API_HOST}/api/tags/${tagToAdd}`;\n    const fetchConfig = {\n      method: \"post\",\n      credentials: \"include\"\n    };\n    const response = await fetch(url, fetchConfig);\n\n    if (response.ok) {\n      getUserTags();\n      getAddableTags();\n    }\n  }\n\n  function handleTagChange(event) {\n    const value = event.target.value;\n    setTagToAdd(value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-container rounded-edges bg-text mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Current User Tags:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex mb-3\",\n        children: userTags.map(tag => {\n          let currentTag = Object.entries(tag);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"id-tag\",\n              children: [currentTag[0][1], /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-close\",\n                onClick: deleteTag,\n                \"aria-label\": \"delete\",\n                value: currentTag[0][0]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this)\n          }, currentTag[0], false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add a Tag:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        id: \"add-tag\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: handleTagChange,\n            value: tagToAdd,\n            required: true,\n            name: \"tag_to_add\",\n            id: \"tag_to_add\",\n            className: \"form-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Choose a Tag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this), addableTags.map(tag => {\n              let currentTag = Object.entries(tag);\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: currentTag[0][0],\n                children: currentTag[0][1]\n              }, currentTag[0][0] + currentTag[0][1], false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 37\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditTags, \"4Rl3afpsIaHg0oZeqWMKgZPQpQI=\");\n\n_c = EditTags;\nexport default EditTags;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditTags\");","map":{"version":3,"names":["useEffect","useState","useCallback","EditTags","userData","setUserData","allTags","setAllTags","userTags","setUserTags","addableTags","setAddableTags","tagToAdd","setTagToAdd","getAddableTags","difference","forEach","tag","i","length","Object","keys","toString","splice","getUserTags","url","process","env","REACT_APP_API_HOST","response","fetch","credentials","data","json","ok","tags","console","log","getUserData","account","getAllTags","deleteTag","event","preventDefault","target","value","fetchConfig","method","handleSubmit","handleTagChange","map","currentTag","entries"],"sources":["/Users/amandagifford/SoftwareEngineering/ThriveTogetherFrontend2/src/EditTags.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\n\nconst EditTags = () => {\n    const [userData, setUserData] = useState(\"\");\n    const [allTags, setAllTags] = useState([]);\n    const [userTags, setUserTags] = useState([]);\n    const [addableTags, setAddableTags] = useState([]);\n    const [tagToAdd, setTagToAdd] = useState(\"\");\n\n    const getAddableTags = useCallback(() => {\n            let difference = allTags;\n            userTags.forEach(tag => {\n                for (let i = 0; i < difference.length; i++){\n                    if (Object.keys(tag).toString() === Object.keys(difference[i]).toString()) {\n                        difference.splice(i, 1);\n                    }\n                }\n            });\n            setAddableTags(difference);\n        }, [userTags, allTags]);\n\n    const getUserTags = useCallback(async () => {\n            let url=`${process.env.REACT_APP_API_HOST}/api/tags/${userData[\"username\"]}`;\n            let response = await fetch(\n                url,\n                {\n                    credentials: \"include\",\n                }\n            );\n            let data = await response.json();\n\n            if (response.ok) {\n                setUserTags(data.tags)\n            } else {\n                console.log(\"Error! Tags not found.\")\n            }\n        }, [userData]);\n\n\n    useEffect(() => {\n\n        async function getUserData() {\n            let url= `${process.env.REACT_APP_API_HOST}/token`;\n            let response = await fetch(url, {\n                credentials: \"include\",\n            });\n            let data = await response.json();\n\n            if (response.ok) {\n                setUserData(data.account);\n            } else {\n                console.log(\"User data could not be fetched\");\n            }\n        }\n\n        async function getAllTags() {\n            let url=`${process.env.REACT_APP_API_HOST}/api/tags`\n            let response = await fetch(url)\n            let data = await response.json();\n\n            if (response.ok) {\n                setAllTags(data.tags);\n            } else {\n                console.log(\"Tags could not be fetched.\")\n            }\n        }\n\n        getUserData();\n        getAllTags();\n    }, []);\n\n    useEffect(() => {\n        getUserTags();\n    }, [userData, getUserTags]);\n\n    useEffect(() => {\n        getAddableTags();\n    }, [userTags, getAddableTags]);\n\n    async function deleteTag(event) {\n        event.preventDefault();\n        const url = `${process.env.REACT_APP_API_HOST}/api/tags/${event.target.value}`;\n        const fetchConfig = {\n            method: \"delete\",\n            credentials: \"include\",\n        }\n\n        const response = await fetch(url, fetchConfig);\n        if (response.ok) {\n            getUserTags();\n            getAddableTags();\n        }\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault();\n        const url = `${process.env.REACT_APP_API_HOST}/api/tags/${tagToAdd}`;\n        const fetchConfig = {\n            method: \"post\",\n            credentials: \"include\",\n        }\n\n        const response = await fetch(url, fetchConfig);\n        if (response.ok) {\n            getUserTags();\n            getAddableTags();\n        }\n    }\n\n    function handleTagChange(event) {\n        const value = event.target.value;\n        setTagToAdd(value);\n    }\n\n    return (\n        <div>\n            <div className=\"content-container rounded-edges bg-text mb-3\">\n                <h3>Current User Tags:</h3>\n                <div className=\"d-flex mb-3\">\n                    {userTags.map(tag => {\n                        let currentTag = Object.entries(tag);\n                        return (\n                            <div key={currentTag[0]}>\n                                <span className=\"id-tag\">\n                                    {currentTag[0][1]}\n                                    <button type=\"button\" className='btn-close' onClick={deleteTag} aria-label=\"delete\" value={currentTag[0][0]}></button>\n                                </span>\n                            </div>\n                        );\n                    })}\n                </div>\n                <h3>Add a Tag:</h3>\n                <form onSubmit={handleSubmit} id=\"add-tag\">\n                    <div className=\"d-flex mb-3\">\n                        <select onChange={handleTagChange} value={tagToAdd} required name=\"tag_to_add\" id=\"tag_to_add\" className=\"form-select\">\n                            <option value=\"\">Choose a Tag</option>\n                            {addableTags.map(tag => {\n                                let currentTag = Object.entries(tag);\n                                return (\n                                    <option key={currentTag[0][0] + currentTag[0][1]} value={currentTag[0][0]}>\n                                        {currentTag[0][1]}\n                                    </option>\n                                );\n                            })}\n                        </select>\n                        <button className=\"btn btn-primary\">Add</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default EditTags;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}